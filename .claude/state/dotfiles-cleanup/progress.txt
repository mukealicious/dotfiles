# Progress Log
PRD: dotfiles-cleanup
Started: 2026-01-21

## Codebase Patterns
- macOS 15+ includes `/usr/bin/trash` - no homebrew needed for trash CLI

---
<!-- Task logs below - APPEND ONLY -->

## Task - functional-1
- Verified macOS 15+ includes built-in `/usr/bin/trash`
- No Brewfile change needed - homebrew `trash` or `macos-trash` only adds `--interactive` flag
- Updated PRD to reflect using system trash
- **Learnings:** Check for built-in macOS commands before adding brew dependencies

## Task - functional-2
- Removed `browser-automation@browser-tools` from `~/.claude/settings.json` enabledPlugins
- Files changed: `~/.claude/settings.json`
- **Learnings:** Settings file is outside dotfiles repo - need to track via claude/install.sh or symlink

## Task - functional-3
- Removed browserbase marketplace add and plugin install from `claude/install.sh`
- Files changed: `claude/install.sh`
- **Learnings:** Plugin removal requires both marketplace and plugin install cleanup

## Task - functional-4
- Created `claude/hooks/safety-rm.sh` - PreToolUse hook that rewrites rm -rf/r/f to trash
- Hook uses JSON input/output format with jq for manipulation
- Sets `permissionDecision: "ask"` so user still confirms the trash command
- Files changed: `claude/hooks/safety-rm.sh` (new)
- **Learnings:** Claude hooks use [[:space:]] POSIX class for portable whitespace matching in sed
